# Spring 스케줄러 (Scheduler)

> 작성일: 2024-12-13
> Phase: 2 (인증 시스템)

---

## 1. 스케줄러란?

**특정 시간 또는 주기적으로 자동 실행되는 작업**입니다.

---

## 2. 사용 예시

| 작업 | 주기 |
|------|------|
| 만료된 인증 토큰 삭제 | 매일 새벽 3시 |
| 일일 면접 횟수 초기화 | 매일 자정 |
| 휴면 계정 처리 | 매월 1일 |
| 로그 파일 정리 | 매주 일요일 |

---

## 3. Spring에서 사용법

### 1단계: `@EnableScheduling` 추가

```java
@SpringBootApplication
@EnableScheduling  // 스케줄링 활성화
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}
```

### 2단계: 스케줄러 클래스 생성

```java
@Component
public class CleanupScheduler {

    @Scheduled(cron = "0 0 3 * * *")  // 매일 새벽 3시
    public void deleteExpiredTokens() {
        // 만료된 토큰 삭제 로직
    }
}
```

---

## 4. Cron 표현식

```
초 분 시 일 월 요일
0  0  3  *  *  *
```

| 위치 | 의미 | 값 범위 |
|------|------|---------|
| 1 | 초 | 0-59 |
| 2 | 분 | 0-59 |
| 3 | 시 | 0-23 |
| 4 | 일 | 1-31 |
| 5 | 월 | 1-12 |
| 6 | 요일 | 0-7 (0,7=일요일) |

### 예시

| Cron 표현식 | 의미 |
|-------------|------|
| `0 0 3 * * *` | 매일 새벽 3시 |
| `0 0 0 * * *` | 매일 자정 |
| `0 0 9 * * MON` | 매주 월요일 오전 9시 |
| `0 0 0 1 * *` | 매월 1일 자정 |
| `0 */10 * * * *` | 10분마다 |

---

## 5. 다른 스케줄링 옵션

### fixedRate
```java
@Scheduled(fixedRate = 60000)  // 1분마다 (밀리초)
public void task() { }
```

### fixedDelay
```java
@Scheduled(fixedDelay = 60000)  // 이전 작업 완료 후 1분 뒤
public void task() { }
```

### initialDelay
```java
@Scheduled(initialDelay = 10000, fixedRate = 60000)  // 시작 10초 후부터 1분마다
public void task() { }
```

---

## 6. 프로젝트 적용 예정

| 기능 | Phase |
|------|-------|
| 만료된 인증 토큰 정리 | Phase 7 (배포/최적화) |
| 일일 면접 횟수 초기화 | Phase 3 (면접 기능) |
